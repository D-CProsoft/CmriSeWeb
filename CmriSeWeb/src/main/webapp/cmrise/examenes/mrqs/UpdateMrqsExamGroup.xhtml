<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template/template.xhtml">
 
 <ui:define name="xxhrwjs">
 <script type="text/javascript">

 function handleUpdateGrupoRequest(xhr, status, args){
	 if(args.validationFailed) {
 		 argsValidationFailed(); 
     }
 }
 
 </script>
</ui:define>
 
 <ui:define name="xxhrwcss">
<style type="text/css">
	 .ui-filter-column .ui-column-customfilter .custom-filter {
        width: 100%;
        box-sizing: border-box;
    }
</style>
</ui:define>

                    
<ui:define name="content">
<h1>#{updateMrqsExamGroupForm.tituloGrupo}</h1>
<h:form id="updateMrqsExamGroupForm">
<p:growl id="messages" showDetail="true" />
<div class="ui-g">
 <div class="ui-g-2">
    <p:panel layout="grid" >
      <f:facet name="header">
	       Grupo de Preguntas
	     </f:facet>
	   <p:tree value="#{updateMrqsExamForm.rootMrqsGrupo}" var="node" style="width:100%" selectionMode="single" selection="#{updateMrqsExamForm.selectedNode}" dynamic="true">
         <p:ajax event="select" update=":updateMrqsExamGroupForm:messages" listener="#{updateMrqsExamForm.onNodeSelect}" />
        <p:treeNode>
            <h:outputText value="#{node.titulo}" />
        </p:treeNode>
      </p:tree>    
	  <p:commandButton  title="Nuevo"  value="Agregar Nuevo Grupo" update="updateMrqsExamGroupForm" icon="pi pi-plus" actionListener="#{updateMrqsExamForm.initMrqGroup()}" oncomplete="PF('MrqsGrupoHdrCreateDialogWV').show();"/>
     </p:panel>
 </div>
 <div class="ui-g-10">
   <p:tabView>
     <p:tab title="Información Grupo">
      <p:panelGrid id="grupoHdrPanelId" columns="3" layout="grid" columnClasses="ui-g-12 ui-md-6 ui-lg-2,ui-g-12 ui-md-6 ui-lg-8,ui-g-12 ui-md-6 ui-lg-2">
	  <p:outputLabel for="publicTitle" value="Título"/>
	  <p:inputText id="publicTitle" value="#{updateMrqsExamGroupForm.mrqsGrupoHdr.titulo}"  required="true" requiredMessage="#{msgs['globalForm.requiredMessage']}" style="width:100%"/>
	  <p:message for="publicTitle"/>
	  <p:outputLabel for="topic" value="Tema" />
	  <p:selectOneMenu id="topic"  value="#{updateMrqsExamGroupForm.mrqsGrupoHdr.tema}"   required="true" requiredMessage="#{msgs['globalForm.requiredMessage']}">
	  <f:selectItem itemLabel="Seleccione un tema" itemValue="" />
	  <f:selectItems value="#{selectsHelper.selectTemaExamenItems}" />
	  </p:selectOneMenu>
	  <p:message for="topic"/>
	  <p:outputLabel for="internalComments" value="Comentarios"/>
	  <p:inputTextarea  id="internalComments" value="#{updateMrqsExamGroupForm.mrqsGrupoHdr.comentarios}"  rows="4" style="width:100%"/>
	  <p:message  for="internalComments"/> 
	  </p:panelGrid>
	  <div class="ui-g">
	   <div class="ui-g-3"></div>
	   <div class="ui-g-3"><p:commandButton value="Borrar Grupo" immediate="true" onclick="PF('deleteGrupoDialogWV').show();" style="width:100%"/></div>
	   <div class="ui-g-3"><p:commandButton value="Actualizar Grupo" update="updateMrqsExamGroupForm" action="#{updateMrqsExamGroupForm.updateMRQsGroup()}" oncomplete="handleUpdateGrupoRequest(xhr, status, args)" style="width:100%"/></div>
	   <div class="ui-g-3"><p:commandButton value="Cerrar" action="#{updateMrqsExamGroupForm.cancelMRQsGroup()}" immediate="true" style="width:100%"/></div> 
	  </div>
     </p:tab>
      <p:tab title="Listas Peguntas">
        <div class="ui-g">
		 <div class="ui-g-4">
		    <h3>Seleccionar MRQs</h3>
		 </div>
		  <div class="ui-g-4">
		   <p:commandButton id="seleccioneMRQs" icon="fa fa-external-link" oncomplete="PF('preguntasHdrDialogWV').show();" style="width:98%"/>
		   <p:tooltip id="toolTipFade" for="seleccioneMRQs" value="Seleccionar MRQs" position="top"/>
		  </div>
		  </div>
       
          <p:dataTable var="preguntasHdrV1" widgetVar="preguntasHdrWV" value="#{updateMrqsExamGroupForm.listMrqsGrupoPreguntas}"   paginator="true" rows="10" paginatorPosition="bottom" emptyMessage="Sin resultados" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}" >
		   <f:facet name="header">MRQs</f:facet>
		    <p:column headerText="Título">
		     <h:outputText value="#{preguntasHdrV1.titulo}" />
		    </p:column>
		    <p:column headerText="Tipo Pregunta"  >
		       <h:outputText value="#{preguntasHdrV1.tipoPreguntaDesc}" />
		    </p:column>
		    <p:column headerText="Estatus">
		        <h:outputText value="#{preguntasHdrV1.estatusDesc}" />
		    </p:column>
		    <p:column headerText="Tema">
		       <h:outputText value="#{preguntasHdrV1.temaPreguntaDesc}" />
		    </p:column>
		     <p:column headerText="Etiquetas">
		        <h:outputText value="#{preguntasHdrV1.etiquetas}" />
		    </p:column>
		     <p:column headerText="Acciones">
		      <p:commandButton icon="fa fa-trash" style="margin-left: 10px;" oncomplete="PF('deletePreguntasHdrDialogWV').show();" ajax="true" actionListener="#{updateMrqsExamGroupForm.selectForAction(preguntasHdrV1)}"/>
		     </p:column>
		 </p:dataTable>
      </p:tab>
     </p:tabView>
 </div>
 </div>
</h:form>

<h:form id="ReadOnlyForm">
<p:dialog id="preguntasHdrDialogId" widgetVar="preguntasHdrDialogWV" modal="true" closable="true" closeOnEscape="true" draggable="false" resizable="false" width="98%" header="Registrar Usuario">
 <p:dataTable var="preguntasHdrV1" widgetVar="preguntasHdrWV" value="#{updateMrqsExamGroupForm.listMrqsPreguntasHdrV1}"   selection="#{updateMrqsExamGroupForm.selectedsMrqsPreguntasHdrV1}" rowKey="#{preguntasHdrV1.numero}" paginator="true" rows="10" paginatorPosition="bottom" emptyMessage="Sin resultados" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}" >
   <f:facet name="header">MRQs</f:facet>
    <p:column selectionMode="multiple" style="width:16px;text-align:center"/>
    <p:column headerText="Título">
     <h:outputText value="#{preguntasHdrV1.titulo}" />
    </p:column>
    <p:column filterBy="#{preguntasHdrV1.tipoPregunta}" headerText="Tipo Pregunta" filterMatchMode="exact" >
        <f:facet name="filter"> 
        <p:selectOneMenu onchange="PF('preguntasHdrWV').filter()" id="questionType" value="#{createMrqForm.tipoPregunta}" styleClass="custom-filter">
          <f:selectItem itemLabel="Seleccione.."/>
          <f:selectItems value="#{selectsHelper.selectTipoPreguntaItems}" />
         </p:selectOneMenu>
         </f:facet>
       <h:outputText value="#{preguntasHdrV1.tipoPreguntaDesc}" />
    </p:column>
    <p:column headerText="Estatus">
        <h:outputText value="#{preguntasHdrV1.estatusDesc}" />
    </p:column>
    <p:column headerText="Tema">
       <h:outputText value="#{preguntasHdrV1.temaPreguntaDesc}" />
    </p:column>
     <p:column headerText="Etiquetas">
        <h:outputText value="#{preguntasHdrV1.etiquetas}" />
    </p:column>
 </p:dataTable>
 <div class="ui-g">
   <div class="ui-g-4"></div>
   <div class="ui-g-4"><p:commandButton value="Agregar"  action="#{updateMrqsExamGroupForm.addMRQsQuestions()}"  style="width:100%"/></div>
   <div class="ui-g-4"><p:commandButton value="Cancelar" onclick="PF('preguntasHdrDialogWV').hide();" style="width:100%"/></div> 
   </div>
  </p:dialog>
 </h:form>

<h:form id="DeleteForm">
   <p:dialog id="deletePreguntasHdrDialogId" widgetVar="deletePreguntasHdrDialogWV" modal="true" closable="true" closeOnEscape="true" draggable="false" resizable="false" width="1000" header="Borrar Registro">
    <h2>#{msgs['globalForm.deleteMessage']}</h2>
    <div class="ui-g" >
              <div class="ui-g-12 ui-lg-2" >
                 <p:commandButton id="DeletePregntaBtn" update="updateMrqsExamGroupForm ReadOnlyForm" value="Aceptar" actionListener="#{updateMrqsExamGroupForm.delete()}" oncomplete="PF('deletePreguntasHdrDialogWV').hide();"  />
              </div>
              <div class="ui-g-12 ui-lg-2" >
                 <p:commandButton id="CancelarPreguntaBtn"  value="Cancelar"  onclick="PF('deletePreguntasHdrDialogWV').hide();" />
              </div>
     </div>
   </p:dialog>
    <p:dialog id="deleteGrupoDialogId" widgetVar="deleteGrupoDialogWV" modal="true" closable="true" closeOnEscape="true" draggable="false" resizable="false" width="1000" header="Borrar Registro">
    <h2>#{msgs['globalForm.deleteMessage']}</h2>
    <div class="ui-g" >
              <div class="ui-g-12 ui-lg-2" >
                 <p:commandButton id="DeleteGrupoBtn" action="#{updateMrqsExamGroupForm.deleteMRQsGroup()}" value="Aceptar"  />
              </div>
              <div class="ui-g-12 ui-lg-2" >
                 <p:commandButton id="CancelarGrupoBtn"  value="Cancelar"  onclick="PF('deleteGrupoDialogWV').hide();" />
              </div>
     </div>
   </p:dialog>
</h:form> 

<h:form id="MrqsGrupoHdrCreateForm">
 <f:passThroughAttribute name="autocomplete" value="off"/>
 <p:dialog id="MrqsGrupoHdrCreateDialogId" widgetVar="MrqsGrupoHdrCreateDialogWV" modal="true" closable="true" closeOnEscape="true" draggable="false" resizable="false" width="1000" header="Crear Grupo">
  <p:panelGrid id="grupoHdrPanelId" columns="3" layout="grid" columnClasses="ui-g-12 ui-md-6 ui-lg-2,ui-g-12 ui-md-6 ui-lg-8,ui-g-12 ui-md-6 ui-lg-2">
  <p:outputLabel for="publicTitle" value="Título"/>
  <p:inputText id="publicTitle" value="#{updateMrqsExamForm.mrqsGrupoHdr.titulo}"  required="true" requiredMessage="#{msgs['globalForm.requiredMessage']}" style="width:100%"/>
  <p:message for="publicTitle"/>
  <p:outputLabel for="topic" value="Tema" />
  <p:selectOneMenu id="topic"  value="#{updateMrqsExamForm.mrqsGrupoHdr.tema}"   required="true" requiredMessage="#{msgs['globalForm.requiredMessage']}">
  <f:selectItem itemLabel="Seleccione un tema" itemValue="" />
  <f:selectItems value="#{selectsHelper.selectTemaExamenItems}" />
  </p:selectOneMenu>
  <p:message for="topic"/>
  <p:outputLabel for="internalComments" value="Comentarios"/>
  <p:inputTextarea  id="internalComments" value="#{updateMrqsExamForm.mrqsGrupoHdr.comentarios}"  rows="4" style="width:100%"/>
  <p:message  for="internalComments"/> 
  </p:panelGrid>
  <div class="ui-g">
   <div class="ui-g-4"></div>
   <div class="ui-g-4"><p:commandButton value="Crear Grupo" update="MrqsGrupoHdrCreateForm:grupoHdrPanelId" action="#{updateMrqsExamForm.addMRQsGroup()}" oncomplete="handleCreateGrupoRequest(xhr, status, args)" style="width:100%"/></div>
   <div class="ui-g-4"><p:commandButton value="Cancelar" onclick="PF('MrqsGrupoHdrCreateDialogWV').hide();" style="width:100%"/></div> 
   </div>
  </p:dialog>
</h:form>

</ui:define>
</ui:composition>                