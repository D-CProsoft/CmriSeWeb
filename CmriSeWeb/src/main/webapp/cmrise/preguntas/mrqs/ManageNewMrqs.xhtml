<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template/template.xhtml">
<ui:define name="xxhrwjs">
<script type="text/javascript">
function handleDeleteRequest(xhr, status, args){
	 if(args.validationFailed|| !args.deleteIn) {
		 PF('deleteRolDialogWV').jq.effect("shake", {times:5}, 100);
		 argsValidationFailed(); 
   }else{
   	 PF('deleteRolDialogWV').hide();
   }	
}
function handleDuplicateRequest(xhr, status, args){
	 if(args.validationFailed|| !args.duplicateIn) {
		 PF('duplicateMrqDialogWV').jq.effect("shake", {times:5}, 100);
		 argsValidationFailed(); 
  }else{
  	 PF('duplicateMrqDialogWV').hide();
  }	
	 function handleUpdateRequest(xhr, status, args){
		 if(args.validationFailed|| !args.updateIn) {
			 PF('updateRolDialogWV').jq.effect("shake", {times:5}, 100);
			 argsValidationFailed(); 
	   }else{
	   	 PF('updateRolDialogWV').hide();
	   }	
	}
}

</script>
</ui:define>
                                 
<ui:define name="content">

<h:panelGroup rendered="false">
<h:form id="SearchForm"> 
<f:passThroughAttribute name="autocomplete" value="off"/> 
<p:breadCrumb>
  		<p:menuitem value="Inicio" outcome="PaginaPrincipal"/>
      <p:menuitem value="Reactivos" url="#" />
  </p:breadCrumb>
  
 <p:fieldset legend="Buscar Pregunta" toggleable="true" toggleSpeed="500" style="margin-bottom:20px" collapsed="true" > 
  <p:ajax event="toggle" /> 
  <p:panel id="SearchPanel" > 
  <div class="ui-g ui-fluid" style="width: 100%; margin-top: 5px;"> 
    <div class="ui-g-6 ui-lg-3" > 
         <p:outputLabel   value="Titulo Pregunta:" /> 
         <p:inputText id="titulo_pregunta" value="#{manageMrqsForm.titulo}" style="width: 100%; margin-top: 5px;"  maxlength="50" /> 
         <p:message for="titulo_pregunta"/> 
         </div> 
        </div> 
     <div class="ui-g"> 
        <div class="ui-g-12 ui-lg-12" style="text-align: right;"> 
         <p:commandButton value="Cancelar"> 
       <p:ajax update="SearchPanel" resetValues="true" /> 
       </p:commandButton> 
        <p:commandButton value="Consultar"    update="ReadOnlyForm" style="margin-left: 10px;"/> 
       </div> 
     </div> 
  </p:panel> 
  </p:fieldset> 
</h:form>
</h:panelGroup>

<h:form id="ReadOnlyForm">

<div class="card">
<p:growl id="growl" showDetail="true"/>
<p:commandButton immediate="true" title="Nuevo"  value="Nuevo Reactivo" icon="pi pi-plus" action="Preguntas-CreateNewMrqs" style="margin:10px;"/>
 <p:dataTable var="preguntasHdrV1"  value="#{manageMrqsForm.listMrqsPreguntasHdrV1}"  paginator="true" rows="50" paginatorPosition="bottom" emptyMessage="Sin resultados" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}" >
   <f:facet name="header">Reactivos</f:facet>
    <p:column headerText="ID" style="width:20px;">
     <h:outputText value="#{preguntasHdrV1.numero}" />
    </p:column>
    <p:column headerText="Categoria Examen">
     <h:outputText value="#{preguntasHdrV1.admonExamenDesc}" />
    </p:column>
    <p:column headerText="Materia">
     <h:outputText value="#{preguntasHdrV1.admonMateriaDesc}" />
    </p:column>
    <p:column headerText="Clasificación">
       <h:outputText value="#{preguntasHdrV1.admonSubmateriaDesc}" />
    </p:column>
    <p:column headerText="Tipo Reactivo">
       <h:outputText value="#{preguntasHdrV1.tipoPreguntaDesc}" />
    </p:column>
    <p:column headerText="Estatus">
        <h:outputText value="#{preguntasHdrV1.estatusDesc}" />
    </p:column>
     <p:column headerText="Diagnostico">
        <h:outputText value="#{preguntasHdrV1.diagnostico}" />
    </p:column>
     <p:column headerText="Acciones">
       <p:commandButton icon="fa fa-edit" style="margin-left: 10px;" action="#{manageMrqsForm.update(preguntasHdrV1)}" title="Editar"/>
       <p:commandButton icon="fa fa-copy" style="margin-left: 10px;" oncomplete="PF('duplicateMrqDialogWV').show();" ajax="true" actionListener="#{manageMrqsForm.selectForAction(preguntasHdrV1)}" title="Duplicar"/>
       <p:commandButton icon="fa fa-trash" style="margin-left: 10px;" oncomplete="PF('deleteRolDialogWV').show();" ajax="true" actionListener="#{manageMrqsForm.selectForAction(preguntasHdrV1)}" title="Eliminar"/>
    </p:column>
 </p:dataTable>
  </div>
 </h:form>

 <h:form id="DuplicateForm">
  <p:dialog id="duplicateMrqDialogId" widgetVar="duplicateMrqDialogWV" modal="true" closable="true" closeOnEscape="true" draggable="false" resizable="false" width="1000" header="Duplicar Registro">
   <h2>¿Seguro que quieres duplicar esta pregunta?</h2>
    <div class="ui-g" >
              <div class="ui-g-12 ui-lg-2" >
                 <p:commandButton id="DeleteBtn" update="ReadOnlyForm" value="Aceptar" actionListener="#{manageMrqsForm.duplicate()}" oncomplete="handleDuplicateRequest(xhr, status, args)"  />
              </div>
              <div class="ui-g-12 ui-lg-2" >
                 <p:commandButton id="CancelarBtn"  value="Cancelar"  onclick="PF('duplicateMrqDialogWV').hide();" />
              </div>
     </div>
  </p:dialog>
</h:form>
 
   
 <h:form id="DeleteForm">
  <p:dialog id="deleteRolDialogId" widgetVar="deleteRolDialogWV" modal="true" closable="true" closeOnEscape="true" draggable="false" resizable="false" width="1000" header="Borrar Registro">
   <h2>¿Esta seguro de que desea borrar este registro?</h2>
    <div class="ui-g" >
              <div class="ui-g-12 ui-lg-2" >
                 <p:commandButton id="DeleteBtn" update="ReadOnlyForm" value="Aceptar"   actionListener="#{manageMrqsForm.delete()}" oncomplete="handleDeleteRequest(xhr, status, args)"  />
              </div>
              <div class="ui-g-12 ui-lg-2" >
                 <p:commandButton id="CancelarBtn"  value="Cancelar"  onclick="PF('deleteRolDialogWV').hide();" />
              </div>
     </div>
  </p:dialog>
</h:form>

 
</ui:define>
</ui:composition>                